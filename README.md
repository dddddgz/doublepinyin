# DoublePinyin Trainer / 双拼练习器

> 程序名称改成这个是因为原来的名称不妥当（既然认为“DoublePinyin”意为双拼，那就不该以它命名双拼练习器）；Repo 名称暂时不改。

## 版本信息

版本名命名规则（第 1 版）**【1.1.0 版本开始正式使用】**。

每个版本名是 `a.b.c` 格式，`a` `b` `c` 都是非负整数，其取值范围如下：

- $1 <= a$
- $0 <= b <= 9$
- $0 <= c$

`c` 表示一次小更新，例如添加一个功能、修复一个 bug；`b` 表示一次大更新，例如添加多个功能、修复多个 bug；当按照上述规则使用时，如果 `b` 应当大于 9，`b` 清零，`a` 增加 1。`a` `b` `c` 分别从 1、0、0 开始使用。

### 历史记录

<table>
  <tr>
    <th colspan=3>日期</th>
    <th rowspan=2>版本</th>
    <th rowspan=2>更改</th>
  </tr>
  <tr>
    <th>年</th>
    <th>月</th>
    <th>日</th>
  </tr>
  <tr>
    <td>2025</td>
    <td>4</td>
    <td>3</td>
    <td>1.0.0</td>
    <td>初次提交，有“键位图”“练习”“设置”三个界面</td>
  </tr>
  <tr>
    <td>2025</td>
    <td>4</td>
    <td>3</td>
    <td>1.0.1</td>
    <td>添加了更新功能</td>
  </tr>
  <tr>
    <td rowspan=10>2025</td>
    <td rowspan=10>4</td>
    <td rowspan=10>6</td>
    <td rowspan=10>1.1.0</td>
    <td>移除了出现 bug 的更新功能</td>
  </tr>
  <tr><td>加入了 6 种双拼方案，修改了双拼方案格式和保存逻辑</td></tr>
  <tr><td>修改了嗯、噷、哼三个字在“练习”页面的拼音</td></tr>
  <tr><td>将 ü 单独使用时的按键设为 u 而不是 v</td></tr>
  <tr><td>添加逻辑使可以正常使用按键为 ; 的拼音</td></tr>
  <tr><td>对“练习”页面的模式 2 无法访问 API 网站的情况进行容错并弹出提示窗口</td></tr>
  <tr><td>修改新建双拼方案页面输入框逻辑 bug（此 bug 使该页面重新打开后文字仍然被保存）</td></tr>
  <tr><td>使用 json 库自带函数格式化 JSON</td></tr>
  <tr><td>简化窗口创建和关于 bootstyle 设置的代码</td></tr>
  <tr><td>添加调整窗口透明度功能</td></tr>
  <tr>
    <td rowspan=7>2025</td>
    <td rowspan=7>4</td>
    <td rowspan=7>8</td>
    <td rowspan=7>1.2.0</td>
    <td>添加了 4 种双拼方案，拆分微软双拼和搜狗双拼，更正智能 ABC、微软双拼中 üe 的按键</td>
  </tr>
  <tr><td>添加逻辑以允许一个韵母对应多个按键</td></tr>
  <tr><td>添加逻辑以允许 ü 作为韵母时使用韵母 u 对应键</td></tr>
  <tr><td>改变了“练习”界面输入内容的判断原理（根据拼音寻找对应按键 -> 分析用户输入按键是否可以满足拼音）</td></tr>
  <tr><td>修改了欸、诶、姆、呒、呣在“练习”界面的拼音</td></tr>
  <tr><td>完成“你知道吗”功能</td></tr>
  <tr><td>修改了页面的显示位置（原来是页面在导航栏下 10px、组件对准页面的上边，现在是页面紧贴导航栏、组件留 10px 空白）</td></tr>
  <tr>
    <td rowspan=7>2025</td>
    <td rowspan=7>4</td>
    <td rowspan=7>12</td>
    <td rowspan=7>1.2.1</td>
    <td>加入了白云双拼</td>
  </tr>
  <tr><td>允许双拼方案设置是否禁止 jqxy 后的 ü 使用 u 对应的按键</td></tr>
  <tr><td>增加了一条、修改了一条“你知道吗”内容</td></tr>
  <tr><td>彻底移除检查更新功能</td></tr>
  <tr><td>添加动画功能（未应用到组件上）</td></tr>
  <tr><td>修改页面切换原理（现在是将不显示的页面移到窗口区域之外）</td></tr>
  <tr><td>给“练习”页面添加上了“作者对拼音的一点小看法”</td></tr>
  <tr>
    <td rowspan=3>2025</td>
    <td rowspan=3>4</td>
    <td rowspan=3>17</td>
    <td rowspan=3>1.2.2</td>
    <td>大量精简代码（共减少了 85 行）</td>
  </tr>
  <tr><td>微调组件的配色、位置和字体</td></tr>
  <tr><td>更正了一条“你知道吗”的错别字</td></tr>
  <tr>
    <td rowspan=13>2025</td>
    <td rowspan=13>4</td>
    <td rowspan=13>20</td>
    <td rowspan=13>1.3.0</td>
    <td>回退了 1.2.2 简写的一部分可读性很差的代码</td>
  </tr>
  <tr><td>删除了调用网络 API 生成文字的功能</td></tr>
  <tr><td>创建 chars.txt，用于储存程序可以解析的所有汉字对应的拼音，完全处理了“边缘拼音”</td></tr>
  <tr><td>创建 chars2.txt，用于储存可以生成的汉字</td></tr>
  <tr><td>加入了 2 种双拼方案</td></tr>
  <tr><td>完全取消了显示汉字声调的功能</td></tr>
  <tr><td>完成动画功能，并应用到组件上</td></tr>
  <tr><td>更改验证双拼输入是否正确的逻辑，现在是“检查显示的拼音所有拼法里是否有用户输入的内容”</td></tr>
  <tr><td>将“你知道吗”改名为“回声洞”，并重写 messages.txt</td></tr>
  <tr><td>微调部分组件配色和位置</td></tr>
  <tr><td>修复“无法正确判断用户输入的零声母对应双拼是否正确”bug</td></tr>
  <tr><td>移除“作者对拼音的一点小看法”</td></tr>
  <tr><td>修改了键位图界面的布局，使其更加智能和美观</td></tr>
  <tr>
    <td rowspan=9>2025</td>
    <td rowspan=9>4</td>
    <td rowspan=9>21</td>
    <td rowspan=9>1.3.1</td>
    <td>更换了新的键位图，并给声母 bpmfdtnlgkhjqxzcsr 对应的按键都以 #00a0e0 标上了声母</td>
  </tr>
  <tr><td>绘制键位图时给 zh ch sh 标上 #00a0e0，给韵母标上 #808080</td></tr>
  <tr><td>当一个按键的韵母数量大于 2 个时，这些韵母的前两个会被显示在第一行，其余显示在下一行（每行里用逗号分隔韵母）</td></tr>
  <tr><td>给一部分组件应用上了“更纱黑体 SC”字体</td></tr>
  <tr><td>给导航栏以外的按钮应用了 outline 样式</td></tr>
  <tr><td>修复重复使用同一个变量名引起的 bug（下面“已知 bug”第七条）</td></tr>
  <tr><td>初步完成“练习记录”功能</td></tr>
  <tr><td>微调部分组件配色</td></tr>
  <tr><td>删除了设置界面“查看当前方案”功能</td></tr>
  <tr>
    <td>2025</td>
    <td>4</td>
    <td>22</td>
    <td>1.3.2</td>
    <td>精简代码逻辑，由 594 行精简至 575 行</td>
  </tr>
  <tr>
    <td rowspan=7>2025</td>
    <td rowspan=7>4</td>
    <td rowspan=7>26</td>
    <td rowspan=7>1.3.3</td>
    <td>为了减少代码行数，将一些需要或未来可能需要重复使用的数据、较为简单的函数设为了常量</td>
  </tr>
  <tr><td>除了上面那条，还通过各种各样的方法缩减了行数</td></tr>
  <tr><td>删除了冗余的“查看当前方案”对应 command</td></tr>
  <tr><td>添加了练习界面是否显示正确按键的功能</td></tr>
  <tr><td>修改设置界面，重新排版了以前有的 Labelframe，添加了关于程序版本和程序发布地址（FishC、GitHub）的 Labelframe</td></tr>
  <tr><td>添加了未启用的检查更新功能</td></tr>
  <tr><td>添加了两条“回声洞”</td></tr>
  <tr>
    <td rowspan=7>2025</td>
    <td rowspan=7>4</td>
    <td rowspan=7>29</td>
    <td rowspan=7>1.4.0【最新版本】</td>
    <td>修改了双拼方案 JSON 的规则，用包含所有附加选项的 flags 替换了单独的 jqxy_not_u</td>
  </tr>
  <tr><td>删除了 chars.txt 和根据汉字寻找对应双拼按键的功能，改为根据拼音寻找</td></tr>
  <tr><td>修改了主页寻找对应双拼按键功能的外观</td></tr>
  <tr><td>将“从第一个到最后一个依次去除键位图上的 Label 的显示位置信息”改成了“当还有 Label 时就销毁最后一个 Label”</td></tr>
  <tr><td>修改显示正确双拼方案功能的两个 bug</td></tr>
  <tr><td>大幅度修改新双拼方案功能的界面</td></tr>
  <tr><td>微调部分组件位置和配色</td></tr>
  <tr><td>修改了回声洞文本</td></tr>
  <tr><td>Þ为了方便编辑器解释，在函数的注释里添加了空行</td></tr>
</table>

### Bugs

- 已解决：Bug 通过修改逻辑等方式成功修复
- *已解决*：Bug 初次解决后被“鞭尸”
- ~~已解决~~：Bug 通过删除出现 bug 的功能解决
- *未解决*：Bug 尚未解决

| No. | Bug                                                       | 出现版本 | 修复版本 |    状态    |
|:---:|:----------------------------------------------------------|:--------:|:--------:|:----------:|
|  1  | 拼音存在错误（例如“棋”多了 ji 音）                        |  1.0.0   |  1.4.0   | ~~已解决~~ |
|  2  | 智能 ABC、微软双拼下韵母 üe 没有对应 v 键                 |  1.0.0   |  1.2.0   |   已解决   |
|  3  | 程序没有对“边缘拼音”完全处理的方法                        |  1.0.0   |  1.4.0   |  *已解决*  |
|  4  | 键道双拼键位图中 w 对应的拼音显示不下                     |  1.1.0   |  1.3.1   |   已解决   |
|  5  | 键道双拼下 jqxy 后的 ü 没有使用 u 对应按键                |  1.2.0   |  1.2.1   |   已解决   |
|  6  | 练习界面无法正确判断零声母情况                            |  1.2.0   |  1.3.0   |   已解决   |
|  7  | chars2.txt 中有的字有多个音，导致练习界面程序无法正确判断 |  1.3.0   |  1.3.1   |   已解决   |
|  8  | 根据汉字寻找按键的功能无法在 chars.txt 里找不到拼音时提示 |  1.3.0   |  1.3.1   |   已解决   |
|  9  | 练习界面显示新的文字时有概率卡顿（需要再按一下/刷新窗口） |  1.?.?   |    -     | **未解决** |
| 10  | 显示双拼按键的功能无法立刻取消（要等到下一个字才取消）    |  1.3.3   |  1.4.0   |   已解决   |
| 11  | 显示双拼按键的功能无法根据双拼方案的改变自动改变          |  1.3.3   |  1.4.0   |   已解决   |

## 运行步骤

python 和 pip 的命令请根据系统灵活更改。

```
git clone https://github.com/dddddgz/doublepinyin
pip install pypinyin ttkbootstrap
cd doublepinyin
python main.py
```

## 使用文档

https://fishc.com.cn/thread-249454-1-1.html

如果您发现了 bug 或有更好的改进建议，请提出 Issue。

尽量不要使用 Pull Request，因为我对 GitHub 这方面的操作还比较生疏，怕搞错。
