# DoublePinyin 双拼练习器

## 版本信息

版本名命名规则（第 1 版）**【1.1.0 版本开始正式使用】**。

每个版本名是 `a.b.c` 格式，`a` `b` `c` 都是非负整数，其取值范围如下：

- $1 <= a$
- $0 <= b <= 9$
- $0 <= c$

`c` 表示一次小更新，例如添加一个功能、修复一个 bug；`b` 表示一次大更新，例如添加多个功能、修复多个 bug；当按照上述规则使用时，如果 `b` 应当大于 9，`b` 清零，`a` 增加 1。`a` `b` `c` 分别从 1、0、0 开始使用。

缩写规则（不计入命名规则）：**当 `c` 为 0 时，允许使用 `a.b` 的形式描述版本号。（1.0.0 -> 1.0；1.1.0 -> 1.1）**

### 历史记录

<table>
  <tr>
    <th colspan=3>日期</th>
    <th rowspan=2>版本</th>
    <th rowspan=2>更改</th>
  </tr>
  <tr>
    <th>年</th>
    <th>月</th>
    <th>日</th>
  </tr>
  <tr>
    <td>2025</td>
    <td>4</td>
    <td>3</td>
    <td>1.0.0</td>
    <td>初次提交，有“键位图”“练习”“设置”三个界面</td>
  </tr>
  <tr>
    <td>2025</td>
    <td>4</td>
    <td>3</td>
    <td>1.0.1</td>
    <td>添加了更新功能</td>
  </tr>
  <tr>
    <td rowspan=10>2025</td>
    <td rowspan=10>4</td>
    <td rowspan=10>6</td>
    <td rowspan=10>1.1.0</td>
    <td>移除了出现 bug 的更新功能</td>
  </tr>
  <tr><td>加入了 6 种双拼方案，修改了双拼方案格式和保存逻辑</td></tr>
  <tr><td>修改了嗯、噷、哼三个字在“练习”页面的拼音</td></tr>
  <tr><td>将 ü 单独使用时的按键设为 u 而不是 v</td></tr>
  <tr><td>添加逻辑使可以正常使用按键为 ; 的拼音</td></tr>
  <tr><td>对“练习”页面的模式 2 无法访问 API 网站的情况进行容错并弹出提示窗口</td></tr>
  <tr><td>修改新建双拼方案页面输入框逻辑 bug（此 bug 使该页面重新打开后文字仍然被保存）</td></tr>
  <tr><td>使用 json 库自带函数格式化 JSON</td></tr>
  <tr><td>简化窗口创建和关于 bootstyle 设置的代码</td></tr>
  <tr><td>添加调整窗口透明度功能</td></tr>
  <tr>
    <td rowspan=6>2025</td>
    <td rowspan=6>4</td>
    <td rowspan=6></td>
    <td rowspan=6>1.2.0【最新版本】</td>
    <td>添加了 4 种双拼方案，拆分微软双拼和搜狗双拼，将智能 ABC 的 üe 改为可以通过 m 和 v 输入</td>
  </tr>
  <tr><td>添加逻辑以允许一个韵母对应多个按键</td></tr>
  <tr><td>添加逻辑以允许 ü 作为韵母时使用韵母 u 对应键</td></tr>
  <tr><td>改变了“练习”界面输入内容的判断原理（根据拼音寻找对应按键 -> 分析用户输入按键是否可以满足拼音）</td></tr>
  <tr><td>修改了欸、诶、姆、呒、呣在“练习”界面的拼音</td></tr>
  <tr><td>完成“你知道吗”功能</td></tr>
  <tr><td></td></tr>
</table>

### 已知 bug

| No. | Issue | Bug 描述                                           | 出现版本 | 修复版本 |
|:---:|:-----:|:---------------------------------------------------|:--------:|:--------:|
|~~1~~| ~~-~~ | ~~智能 ABC、微软双拼下韵母 üe 没有对应 v 键~~      |~~1.0.0~~ |~~1.2.0~~ |
|~~2~~| ~~-~~ | ~~嗯、哼、噷、欸、诶、姆、呒、呣拼音应当发生改变~~ |~~1.0.0~~ |~~1.2.0~~ |
|  3  |   -   | 键道双拼下 jqxy 后的 ü 应当使用 u 对应按键         |  1.2.0   |          |

## 创作背景

长篇大论，不要看直接跳过。

1. 双拼真的很好用，理由有以下几点：
    - 双拼可以提高打字速度。虽然也存在三个拖慢打字速度的情况（作为零声母使用的 `a` `o` `e`），但它们的使用频率极少，而且大部分输入法（点名不具备此功能的微软输入法，Windows 自带的那个）只要输入 `a` `o` `e` 就可以显示出以 `a` `o` `e` 为拼音的字了。
    - 双拼让每个按键使用到的频率更均匀了。全拼部分按键（`h` `g` `n`）的重复使用频率是很高的，而一些按键则几乎没有用到（`v`），全拼的按键是很不均衡的。双拼解决了这个问题，它给几乎所有按键都分配了一个声母和一个韵母（因双拼方案而异）。
    - 基本上所有现代电脑都已经配备了双拼输入功能（虽然双拼输入方案可能不是很完整，点名上面提到的那个微软没常用的小鹤），用起来很方便，既然随时随地都可以用，为什么还要使用打字速度慢的全拼呢？
2. 虽然双拼已经很普及了，但用来练习双拼的桌面程序并不多（也有可能是我没有了解到），就写一个。
3. 很久没有编写有用的程序了，以前写了也是不久就断更，我想写一个长期保持更新状态的程序，顺便练习自己的 UI 开发技能（很久没有用过 `tkinter` `ttkbootstrap` 了）。
4. Git 和 GitHub 的操作也已生疏了，借机练习。
5. “开源”和“免费”似乎越来越难做到了。有人还会为“闭源”和“收费”辩护，这点我虽然不完全反对（毕竟活着是人类必须满足的需求，在这个人口过多到处都存在竞争的社会上更是如此，人性被体现得淋漓尽致），但开源和免费有那么难吗？赚钱养活自己是每个人人生中的一个必然阶段，社会人满为患的情况下，一个人无法赚钱养不活自己意味着被社会淘汰了。但我想问，那些大企业没有钱，一定需要通过闭源等着用户购买/充值的方式赚钱吗？现在广告随处可见，跳过广告为什么也要收费？在网络上使用一个功能（论坛之类的交流地点除外）为什么也要登录注册？（还必须用手机号，这就大大增加了个人信息泄露的风险）与冰冷的网络相比，现实反倒算是人性化的了，一些城市的公共自行车如果使用时间不满 1 小时（或一个单位时间）不收费。用自己学会的编程语言编写一个实用的小工具，难道不是在为社会做贡献吗？哪怕微不足道，这就不是贡献了吗？社会竞争激烈，谁说参加命运莫测的竞争比默默无闻地写程序伟大得多？考试成绩再好，学习再好，如果不把它用作有益的事情，这有什么用吗？（不是说成绩好没用，成绩好并且希望把它用在有用的、对是人的人有好处的地方，有些人无论怎么被伤害都不必考虑）把自己的成果和作出这个成果的过程分享出来，让其他愿意学习的人也看，这难道就不是一种伟大的事业了？我不是在自夸（请不要对这句话作出评论，这不是这里长篇大论讨论的重点），只是想尽我所能（不要对这句话作出评论，人机喷子，特别是某些平台上的的一部分渣滓给我滚），尽量说服每一个看到这个页面的人，开源才真正伟大。
6. 对于第 5 条，后来想到，如果一个平台有通过付费表示支持开发者的通道，且平台有大量可以免费查看的（使用平台上的积分之类的内容的话，这是一种可以让人们长期保持对平台兴趣的方法，特别是平台的初衷是容易让人中途放弃但如果坚持了可以让人受益匪浅的活动）、精彩的、有益的内容的话这是非常正常并且要被大力鼓励的，这里就不举例了，毕竟人机喷子的嘴是关不住的。

## 运行步骤

### Step 1：下载代码

```
git clone https://github.com/dddddgz/doublepinyin
```

### Step 2：下载代码所需要的内容

```
pip install pypinyin ttkbootstrap
```

有些 Python 环境可能需要以下这行代码：

```
python3 -m pip install pypinyin ttkbootstrap
```

### Step 3：运行代码

```
cd doublepinyin
python main.py
```

有些：

```
cd doublepinyin
python3 main.py
```

## 使用文档

https://fishc.com.cn/thread-249454-1-1.html

如果您发现了 bug 或有更好的改进建议，请提出 Issue。

尽量不要使用 Pull Request，因为我对 GitHub 这方面的操作还比较生疏，怕搞错。

## 技术性文档

### 双拼方案

本程序通过检索 `main.py` 运行目录下的 `plans` 文件夹下的所有 `.json` 文件来寻找可用的双拼方案。

上述 `.json` 文件必须有 `name` 键（*不是按键的意思，是指键值对的键*）和以下键：

|        |        |
|:-------|:------:|
| `zh`   |        |
| `ch`   |        |
| `sh`   |        |
| `a`    | `_a`   |
| `o`    | `_o`   |
| `e`    | `_e`   |
| `i`    |        |
| `u`    |        |
| `ü`    |        |
| `ai`   | `_ai`  |
| `ei`   | `_ei`  |
| `ui`   |        |
| `ao`   | `_ao`  |
| `ou`   | `_ou`  |
| `iu`   |        |
| `ie`   |        |
| `üe`   |        |
|        | `_er`  |
| `an`   | `_an`  |
| `en`   | `_en`  |
| `in`   |        |
| `un`   |        |
| `ün`   |        |
| `ang`  | `_ang` |
| `eng`  | `_eng` |
| `ing`  |        |
| `ong`  |        |
| `ia`   |        |
| `ua`   |        |
| `uo`   |        |
| `uai`  |        |
| `iao`  |        |
| `ian`  |        |
| `uan`  |        |
| `üan`  |        |
| `iang` |        |
| `uang` |        |
| `iong` |        |

这些键对应的值必须是 a-z/A-Z 和 ; 中的一个。若拼音在双拼方案里对应多个按键，这些按键应当使用 `,` 分隔。
